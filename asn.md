# Создание, изменение и отмена ASN

При запросе сдать вещи формируется документ ASN в системе ЕМЕ. Также позволяет изменять существующий ASN или отменить его.

POST https://apiamb.kosmoslogistic.ru/api?command=asn

## Заголовки

| Заголовок           | Значение                       |
|---------------------|--------------------------------|
| Content-Type        | application/json              |
| Authorization       | `<your-token>`         |

---

## Тело запроса (создание ASN с доставкой)

```json
{
  "comment": "Велосипед, диван",        // комментарий (не обязательно)
  "need_delivery": true,                // нужна доставка (обязательно)
  "plan_delivery_date": "27.11.2024",   // плановая дата доставки (обязательно)
  "time_min": "9:00",                   // время от (не обязательно)
  "time_max": "13:00",                  // время до (не обязательно)
  "address":                            // адрес (обязательно, если нужна доставка)
  {
    "name": "Джон",                     // имя (обязательно)
    "last_name": "Доу",                 // фамилия (обязательно)
    "phone": "+79998887766",            // телефон (обязательно)
    "full_address": "г Москва, Можайское шоссе, д 6 стр 3 кв 51", // адрес (обязательно)
    "floor": 5,                         // этаж (не обязательно)
    "intercom": "123",                  // домофон (не обязательно)
    "elevator_type": "грузовой"         // тип лифта (не обязательно)
  }
}
```

## Тело запроса (создание ASN с самопривозом)

```json
{
  "comment": "Велосипед, диван",        // комментарий (не обязательно)
  "need_delivery": false,               // нужна доставка (обязательно)
  "plan_delivery_date": "27.11.2024",   // плановая дата доставки (обязательно)
  "time_min": "9:00",                   // время от (не обязательно)
  "time_max": "13:00",                  // время до (не обязательно)
  "pass":                               // пропуск (обязательно, если самопривоз)
  {
    "name": "Джон Доу",                 // ФИО (обязательно)
    "car_num": "T123СТ777"              // номер авто (обязательно)
  }
}
```

## Тело запроса (изменение ASN)

```json
{
  "asn_no": "ASN123456",                // номер ASN (обязательно)
  "comment": "Велосипед, диван",        // комментарий (не обязательно)
  "need_delivery": true,                // нужна доставка (не обязательно)
  "plan_delivery_date": "27.11.2024",   // плановая дата доставки (не обязательно)
  "time_min": "9:00",                   // время от (не обязательно)
  "time_max": "13:00",                  // время до (не обязательно)
  "address":                            // адрес (не обязательно)
  {
    "name": "Джон",                     // имя (не обязательно)
    "last_name": "Доу",                 // фамилия (не обязательно)
    "phone": "+79998887766",            // телефон (не обязательно)
    "full_address": "г Москва, Можайское шоссе, д 6 стр 3 кв 51", // адрес (не обязательно)
    "floor": 5,                         // этаж (не обязательно)
    "intercom": "123",                  // домофон (не обязательно)
    "elevator_type": "грузовой"         // тип лифта (не обязательно)
  },
  "pass":                               // пропуск (не обязательно)
  {
    "name": "Джон Доу",                 // ФИО (не обязательно)
    "car_num": "T123СТ777"              // номер авто (не обязательно)
  }
}
```

## Тело запроса (отмена ASN)

```json
{
  "asn_no": "ASN123456",                // номер ASN (обязательно)
  "cancel_reason": "Клиент передумал"   // причина отмены (обязательно)
}
```

---

## Ответы

### <span style="color: green;">200 ОК</span>

#### Тело ответа

```json
    {
        "result": "Ok"
    }
```
---
### <span style="color: red;">400 Bad Request</span>
Запрос содержит неправильные данные.
#### Тело ответа

```json
    {
        "result": "error",
        "errors":
        [
            {
                "message": "В запросе не задано owner_id."
            }
        ]
    }
```
---
### <span style="color: red;">401 Unauthorized</span>
В запросе не указаны данные для авторизации.
#### Тело ответа

```json
    {
        "result": "error",
        "errors":
        [
            {
                "message": "В запросе не указаны данные для авторизации."
            }
        ]
    }
```
---
### <span style="color: red;">403 Forbidden</span>
Данные для авторизации неверны или доступ к ресурсу запрещен.
#### Тело ответа

```json
    {
        "result": "error",
        "errors":
        [
            {
                "message": "Данные для авторизации неверны."
            }
        ]
    }
```
---
### <span style="color: red;">404 Not Found</span>
Запрашиваемый ресурс не найден.
#### Тело ответа

```json
    {
        "result": "error",
        "errors":
        [
            {
                "message": "Ресурс не найден."
            }
        ]
    }
```



